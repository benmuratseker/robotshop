{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nclass CartService {\n  constructor(http) {\n    this.http = http;\n    this.cart = new BehaviorSubject([]);\n    this.http.get('/api/cart').subscribe({\n      next: cart => this.cart.next(cart)\n    });\n  }\n  getCart() {\n    return this.cart.asObservable();\n  }\n  add(product) {\n    const newCart = [...this.cart.getValue(), product];\n    this.cart.next(newCart);\n    //add to service not only static array and console\n    this.http.post('/api/cart', newCart).subscribe(() => {\n      console.log('added ' + product.name + ' to cart!');\n    });\n    // console.log(`product ${product.name} added to cart`);\n  }\n\n  remove(product) {\n    let newCart = this.cart.getValue().filter(i => i !== product);\n    this.cart.next(newCart);\n    this.http.post('/api/cart', newCart).subscribe(() => {\n      console.log('removed ' + product.name + ' from cart!');\n    });\n  }\n}\nCartService.ɵfac = function CartService_Factory(t) {\n  return new (t || CartService)(i0.ɵɵinject(i1.HttpClient));\n};\nCartService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: CartService,\n  factory: CartService.ɵfac,\n  providedIn: 'root'\n});\nexport { CartService };","map":{"version":3,"names":["BehaviorSubject","CartService","constructor","http","cart","get","subscribe","next","getCart","asObservable","add","product","newCart","getValue","post","console","log","name","remove","filter","i","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["/Users/muratseker/Documents/repos/robotshop/src/app/cart/cart.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable, BehaviorSubject } from 'rxjs';\r\n\r\nimport { IProduct } from '../catalog/product.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class CartService {\r\n  private cart: BehaviorSubject<IProduct[]> = new BehaviorSubject<IProduct[]>([]);\r\n\r\n  constructor(private http: HttpClient) {\r\n    this.http.get<IProduct[]>('/api/cart').subscribe({\r\n      next: (cart) => this.cart.next(cart),\r\n    });\r\n  }\r\n\r\n  getCart(): Observable<IProduct[]> {\r\n    return this.cart.asObservable();\r\n  }\r\n\r\n  add(product: IProduct) {\r\n    const newCart = [...this.cart.getValue(), product];\r\n    this.cart.next(newCart);\r\n    //add to service not only static array and console\r\n    this.http.post('/api/cart', newCart).subscribe(() => {\r\n      console.log('added ' + product.name + ' to cart!');\r\n    });\r\n    // console.log(`product ${product.name} added to cart`);\r\n  }\r\n\r\n  remove(product: IProduct) {\r\n    let newCart = this.cart.getValue().filter((i) => i !== product);\r\n    this.cart.next(newCart);\r\n    this.http.post('/api/cart', newCart).subscribe(() => {\r\n      console.log('removed ' + product.name + ' from cart!');\r\n    });\r\n  }\r\n}\r\n"],"mappings":"AAEA,SAAqBA,eAAe,QAAQ,MAAM;;;AAIlD,MAGaC,WAAW;EAGtBC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAFhB,KAAAC,IAAI,GAAgC,IAAIJ,eAAe,CAAa,EAAE,CAAC;IAG7E,IAAI,CAACG,IAAI,CAACE,GAAG,CAAa,WAAW,CAAC,CAACC,SAAS,CAAC;MAC/CC,IAAI,EAAGH,IAAI,IAAK,IAAI,CAACA,IAAI,CAACG,IAAI,CAACH,IAAI;KACpC,CAAC;EACJ;EAEAI,OAAOA,CAAA;IACL,OAAO,IAAI,CAACJ,IAAI,CAACK,YAAY,EAAE;EACjC;EAEAC,GAAGA,CAACC,OAAiB;IACnB,MAAMC,OAAO,GAAG,CAAC,GAAG,IAAI,CAACR,IAAI,CAACS,QAAQ,EAAE,EAAEF,OAAO,CAAC;IAClD,IAAI,CAACP,IAAI,CAACG,IAAI,CAACK,OAAO,CAAC;IACvB;IACA,IAAI,CAACT,IAAI,CAACW,IAAI,CAAC,WAAW,EAAEF,OAAO,CAAC,CAACN,SAAS,CAAC,MAAK;MAClDS,OAAO,CAACC,GAAG,CAAC,QAAQ,GAAGL,OAAO,CAACM,IAAI,GAAG,WAAW,CAAC;IACpD,CAAC,CAAC;IACF;EACF;;EAEAC,MAAMA,CAACP,OAAiB;IACtB,IAAIC,OAAO,GAAG,IAAI,CAACR,IAAI,CAACS,QAAQ,EAAE,CAACM,MAAM,CAAEC,CAAC,IAAKA,CAAC,KAAKT,OAAO,CAAC;IAC/D,IAAI,CAACP,IAAI,CAACG,IAAI,CAACK,OAAO,CAAC;IACvB,IAAI,CAACT,IAAI,CAACW,IAAI,CAAC,WAAW,EAAEF,OAAO,CAAC,CAACN,SAAS,CAAC,MAAK;MAClDS,OAAO,CAACC,GAAG,CAAC,UAAU,GAAGL,OAAO,CAACM,IAAI,GAAG,aAAa,CAAC;IACxD,CAAC,CAAC;EACJ;;AA7BWhB,WAAW,C;mBAAXA,WAAW,EAAAoB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;AAAA;AAAXvB,WAAW,C;SAAXA,WAAW;EAAAwB,OAAA,EAAXxB,WAAW,CAAAyB,IAAA;EAAAC,UAAA,EAFV;AAAM;SAEP1B,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}